function h(){}h.prototype={diff:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.callback;typeof o=="function"&&(r=o,o={}),this.options=o;var i=this;function s(l){return r?(setTimeout(function(){r(void 0,l)},0),!0):l}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var p=t.length,u=e.length,f=1,a=p+u;o.maxEditLength&&(a=Math.min(a,o.maxEditLength));var c=[{newPos:-1,components:[]}],d=this.extractCommon(c[0],t,e,0);if(c[0].newPos+1>=p&&d+1>=u)return s([{value:this.join(t),count:t.length}]);function w(){for(var l=-1*f;l<=f;l+=2){var v=void 0,y=c[l-1],m=c[l+1],z=(m?m.newPos:0)-l;y&&(c[l-1]=void 0);var D=y&&y.newPos+1<p,q=m&&0<=z&&z<u;if(!D&&!q){c[l]=void 0;continue}if(!D||q&&y.newPos<m.newPos?(v=N(m),i.pushComponent(v.components,void 0,!0)):(v=y,v.newPos++,i.pushComponent(v.components,!0,void 0)),z=i.extractCommon(v,t,e,l),v.newPos+1>=p&&z+1>=u)return s(F(i,v.components,t,e,i.useLongestToken));c[l]=v}f++}if(r)(function l(){setTimeout(function(){if(f>a)return r();w()||l()},0)})();else for(;f<=a;){var L=w();if(L)return L}},pushComponent:function(e,t,o){var r=e[e.length-1];r&&r.added===t&&r.removed===o?e[e.length-1]={count:r.count+1,added:t,removed:o}:e.push({count:1,added:t,removed:o})},extractCommon:function(e,t,o,r){for(var i=t.length,s=o.length,p=e.newPos,u=p-r,f=0;p+1<i&&u+1<s&&this.equals(t[p+1],o[u+1]);)p++,u++,f++;return f&&e.components.push({count:f}),e.newPos=p,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],o=0;o<e.length;o++)e[o]&&t.push(e[o]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function F(n,e,t,o,r){for(var i=0,s=e.length,p=0,u=0;i<s;i++){var f=e[i];if(f.removed){if(f.value=n.join(o.slice(u,u+f.count)),u+=f.count,i&&e[i-1].added){var c=e[i-1];e[i-1]=e[i],e[i]=c}}else{if(!f.added&&r){var a=t.slice(p,p+f.count);a=a.map(function(w,L){var l=o[u+L];return l.length>w.length?l:w}),f.value=n.join(a)}else f.value=n.join(t.slice(p,p+f.count));p+=f.count,f.added||(u+=f.count)}}var d=e[s-1];return s>1&&typeof d.value=="string"&&(d.added||d.removed)&&n.equals("",d.value)&&(e[s-2].value+=d.value,e.pop()),e}function N(n){return{newPos:n.newPos,components:n.components.slice(0)}}var W=new h;function V(n,e,t){return W.diff(n,e,t)}var $=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,I=/\S/,O=new h;O.equals=function(n,e){return this.options.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e||this.options.ignoreWhitespace&&!I.test(n)&&!I.test(e)};O.tokenize=function(n){for(var e=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&$.test(e[t])&&$.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};var T=new h;T.tokenize=function(n){var e=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var o=0;o<t.length;o++){var r=t[o];o%2&&!this.options.newlineIsToken?e[e.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),e.push(r))}return e};var A=new h;A.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var J=new h;J.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function x(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(e){return typeof e}:x=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(n)}var R=Object.prototype.toString,C=new h;C.useLongestToken=!0;C.tokenize=T.tokenize;C.castInput=function(n){var e=this.options,t=e.undefinedReplacement,o=e.stringifyReplacer,r=o===void 0?function(i,s){return typeof s>"u"?t:s}:o;return typeof n=="string"?n:JSON.stringify(E(n,null,null,r),r,"  ")};C.equals=function(n,e){return h.prototype.equals.call(C,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function E(n,e,t,o,r){e=e||[],t=t||[],o&&(n=o(r,n));var i;for(i=0;i<e.length;i+=1)if(e[i]===n)return t[i];var s;if(R.call(n)==="[object Array]"){for(e.push(n),s=new Array(n.length),t.push(s),i=0;i<n.length;i+=1)s[i]=E(n[i],e,t,o,r);return e.pop(),t.pop(),s}if(n&&n.toJSON&&(n=n.toJSON()),x(n)==="object"&&n!==null){e.push(n),s={},t.push(s);var p=[],u;for(u in n)n.hasOwnProperty(u)&&p.push(u);for(p.sort(),i=0;i<p.length;i+=1)u=p[i],s[u]=E(n[u],e,t,o,u);e.pop(),t.pop()}else s=n;return s}var g=new h;g.tokenize=function(n){return n.slice()};g.join=g.removeEmpty=function(n){return n};export{V as d};
